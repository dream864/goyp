<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìš©í‰ë¦¬ì¡°íŠ¸ ì›¹ìº  ì±„ë„ ì„ íƒ</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        /* ì „ì²´ í˜ì´ì§€ ìŠ¤íƒ€ì¼: ì–´ë‘ìš´ í…Œë§ˆ */
        body {
            font-family: 'Pretendard', 'Malgun Gothic', sans-serif;
            background-color: #1a1a1a;
            color: #eee;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* ìƒë‹¨ í—¤ë” */
        header {
            padding: 20px;
            text-align: center;
            width: 100%;
            background-color: #111;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
            margin-bottom: 20px;
        }
        h2 { margin: 0; font-size: 1.2rem; color: #fff; }

        /* ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ */
        .container {
            width: 100%;
            max-width: 800px;
            padding: 0 15px;
            box-sizing: border-box;
        }

        /* ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ ë°•ìŠ¤ */
        .video-wrapper {
            width: 100%;
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.6);
            margin-bottom: 20px;
            aspect-ratio: 16 / 9;
            position: relative;
        }

        video {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        /* í˜„ì¬ ì±„ë„ í‘œì‹œ í…ìŠ¤íŠ¸ */
        .status-text {
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.1rem;
            color: #4CAF50;
            font-weight: bold;
        }

        /* 01~15ë²ˆ ë²„íŠ¼ ë©”ë‰´ ê·¸ë¦¬ë“œ */
        .channel-menu {
            display: grid;
            grid-template-columns: repeat(5, 1fr); /* í•œ ì¤„ì— 5ê°œì”© */
            gap: 10px;
            padding-bottom: 40px;
        }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .channel-btn {
            background-color: #333;
            color: #fff;
            border: 1px solid #444;
            padding: 15px 0;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.2s ease;
            /* ê¸´ ì´ë¦„ì´ ìˆì„ ê²½ìš° ëŒ€ë¹„ */
            line-height: 1.2; 
            white-space: normal;
        }

        .channel-btn:hover {
            background-color: #555;
            transform: translateY(-2px);
        }

        /* ì„ íƒëœ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .channel-btn.active {
            background-color: #4CAF50;
            border-color: #4CAF50;
            color: white;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.4);
        }

        /* ëª¨ë°”ì¼ ë°˜ì‘í˜•: í™”ë©´ì´ ì¢ìœ¼ë©´ í•œ ì¤„ì— 3ê°œì”© */
        @media (max-width: 500px) {
            .channel-menu {
                grid-template-columns: repeat(3, 1fr);
            }
            .channel-btn {
                font-size: 0.9rem;
                padding: 12px 0;
            }
        }
    </style>
</head>
<body>

    <header>
        <h2>ğŸ‚ ì¢…í˜¸ê°€ ë§Œë“  ìš©í‰ ì›¹ìº ë³´ê¸°</h2>
    </header>

    <div class="container">
        <div id="status" class="status-text">ì±„ë„ì„ ì„ íƒí•˜ì„¸ìš”</div>

        <div class="video-wrapper">
            <video id="videoPlayer" controls autoplay muted playsinline></video>
        </div>

        <div id="menuGrid" class="channel-menu"></div>
    </div>

    <script>
        const video = document.getElementById('videoPlayer');
        const menuGrid = document.getElementById('menuGrid');
        const statusText = document.getElementById('status');
        let hls = null;

        // ì„¤ì •: ì´ ì±„ë„ ìˆ˜
        const totalChannels = 15;
        
        // ì¹´ë©”ë¼ ì´ë¦„ ë§¤í•‘ (ì‚¬ìš©ìê°€ ìš”ì²­í•œ ì´ë¦„)
        const camNames = {
            '01': 'ë©”ê°€ê·¸ë¦°',
            '03': 'ì˜ë¡œìš°',
            '04': 'ê³¨ë“œ ì •ìƒ',
            '05': 'ì§„ì…ë„ë¡œ',
            '06': 'ê³¨ë“œ í•˜ë‹¨',
            '07': 'í•‘í¬',
            '08': 'ëœë³´ í•˜ë‹¨',
            '09': 'ëœë³´ ìƒë‹¨',
            '10': 'ë² ì´ìŠ¤ ì „ê²½',
            '14': 'ë°œì™•ì‚° ì •ìƒ',
            '15': 'ì£¼ëª©ìˆ²'

            // 01, 11~13ë²ˆì€ ìˆ«ìë¡œ í‘œì‹œë¨
        };

        // ì´ˆê¸°í™” ì‹¤í–‰
        initMenu();
        
        // 1. ë©”ë‰´ ë²„íŠ¼ ìƒì„± í•¨ìˆ˜
        function initMenu() {
            for (let i = 1; i <= totalChannels; i++) {
                // ìˆ«ì í¬ë§·íŒ…: 1 -> "01"
                const channelNum = String(i).padStart(2, '0');
                
                // ë²„íŠ¼ í…ìŠ¤íŠ¸ ì„¤ì •: camNamesì— ìˆìœ¼ë©´ ì´ë¦„ ì‚¬ìš©, ì—†ìœ¼ë©´ ë²ˆí˜¸ ê·¸ëŒ€ë¡œ ì‚¬ìš©
                const btnText = camNames[channelNum] || channelNum; 
                
                const btn = document.createElement('button');
                btn.className = 'channel-btn';
                btn.innerHTML = btnText; // ì´ë¦„ì´ ê¸¸ ìˆ˜ ìˆìœ¼ë¯€ë¡œ innerHTML ì‚¬ìš©
                
                // í´ë¦­ ì´ë²¤íŠ¸
                btn.onclick = () => selectChannel(channelNum, btn);

                menuGrid.appendChild(btn);

                // í˜ì´ì§€ ë¡œë“œì‹œ 01ë²ˆ ìë™ ì‹¤í–‰
                if (i === 1) {
                    selectChannel(channelNum, btn);
                }
            }
        }

        // 2. ì±„ë„ ë³€ê²½ ë° ì¬ìƒ í•¨ìˆ˜
        function selectChannel(num, clickedBtn) {
            // URL ìƒì„± (cam01.stream íŒ¨í„´)
            const streamUrl = `https://live.yongpyong.co.kr/Ycam1/cam${num}.stream/playlist.m3u8`;
            
            // í˜„ì¬ í™œì„±í™”ëœ ë²„íŠ¼ì˜ í…ìŠ¤íŠ¸ë¥¼ ìƒíƒœ í‘œì‹œì¤„ì— ì‚¬ìš© (ì˜ˆ: "ë©”ê°€ê·¸ë¦° Live")
            const currentName = clickedBtn.innerText;
            statusText.innerText = `${currentName} Live`;

            // ë²„íŠ¼ í™œì„±í™” ìŠ¤íƒ€ì¼ ì²˜ë¦¬
            const allBtns = document.querySelectorAll('.channel-btn');
            allBtns.forEach(btn => btn.classList.remove('active'));
            clickedBtn.classList.add('active');

            // HLS ìŠ¤íŠ¸ë¦¬ë° ì¬ìƒ ë¡œì§
            if (Hls.isSupported()) {
                if (hls) {
                    hls.destroy(); // ê¸°ì¡´ ìŠ¤íŠ¸ë¦¼ ì •ë¦¬
                }
                hls = new Hls();
                hls.loadSource(streamUrl);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, function() {
                    video.play().catch(() => console.log('Autoplay prevented'));
                });
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                // ì‚¬íŒŒë¦¬ ë“± ë„¤ì´í‹°ë¸Œ HLS ì§€ì› ë¸Œë¼ìš°ì €
                video.src = streamUrl;
                video.addEventListener('loadedmetadata', function() {
                    video.play().catch(() => console.log('Autoplay prevented'));
                });
            }
        }
    </script>
</body>
</html>